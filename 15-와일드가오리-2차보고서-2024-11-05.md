# Team-Info
| (1) 과제명 | 큐엔아트(QnArt) : 초등학생 대상, LLM과 이미지 생성 AI를 이용한, 대화와 그림 창작 기반 - 미술 작품 감상 서비스
|:---  |---  |
| (2) 팀 번호 / 팀 이름 | 15-와일드가오리 |
| (3) 팀 구성원 | 주민영(2076395) : 리더, AI, 백엔드  <br> 길연형(2071005) : 팀원, 프론트엔드  <br> 최수미(2040037) : 팀원, 백엔드			 |
| (4) 팀 지도교수 | 오세은 교수님 |
| (5) 팀 멘토 | 현정훈 / 이사 / 아트램프 |
| (6) 과제 분류 | 산학과제 |
| (6) 과제 키워드 | LLM, 이미지 생성 AI, Prompt Engineering, RAG, AI 도슨트  |
| (7) 과제 내용 요약 | 기존의 주입식 미술 관람과 드로잉 중심의 미술 교육 대신, 초등학생들이 AI 도슨트와의 대화를 통해 재미있고 주체적으로 작품을 감상하고, 이미지 생성 AI를 통해 나만의 그림을 창작하는 애플리케이션입니다. 주요기능은 다음과 같습니다.<br><br>1. 도슨트 AI와 대화하며 작품 감상 : 미술 감상 이론을 적용한 프롬프트를 통해, AI 도슨트의 단계별 질문에 답하며 주체적이고,체계적인 작품 감상이 가능합니다. 또한, 도슨트 캐릭터와 TTS & SST 기술을 활용해 자유롭고 친밀하게 상호작용할 수 있는 대화형 감상을 제공합니다.<br><br>2. RAG를 이용한 깊이있는 작품 감상 : 작품 감상 과정에 도움이 되는 정보를 활용하여 사용자에게 보다 정확하고 풍부한 정보를 제공합니다.<br><br>3. 이미지 생성 AI를 이용한 그림 창작 : 감상한 작품에 관람자의 창의적인 아이디어를 반영하여, 이미지 생성 AI 통해 새로운 그림을 창작합니다. 관람자의 특징 또는 작가의 화풍을 반영하여 다양한 그림 창작을 지원합니다. |

<br>

# Project-Summary
| 항목 | 내용 |
|:---  |---  |
| (1) 문제 정의 | 초등학생에게 미술 작품 감상 경험은 학생의 창의력, 표현력을 키우고, 다양한 시각과 지식을 함양하게 할 수 있다는 점에서 초등 교육에 반드시 필요한 요소이다. 그러나 주입식 설명 위주의 수동적 전시 관람, 드로잉 표현에 치중된 미술교육 등의 이유로, 미술 작품 감상에 대한 초등학생들의 인식은 좋지 못하다.이러한 문제를 바탕으로 Target Customer를 크게 2가지 유형으로 설정하였다.<br>1. 주입 위주의 수동적 미술관 관람에 흥미가 없는 초등학생<br>pain point: 주도적 참여 없이 수동적으로 설명을 듣기만 하여 작품 감상에 흥미를 느끼기 어렵다.<br>2. 드로잉 창작 위주의 미술 교육에 흥미가 없는 초등학생<br>pain point: 드로잉 표현 실력이 부족해 자신이 원하는 것을 표현하기 어려워하고, 나아가 미술 작품 자체에 대한 흥미를 잃는다.  |
| (2) 기존연구와의 비교 | [미술작품 향유 관련 서비스]<br>1. DailyArt<br>매일 명화 하나가 선정되어 설명과 함께 주어지는 DailyArt 기능, 원하는 명화를 찾을 수 있는 Discover 기능<br>장점: 앱을 실행하는 것만으로도 명화 감상 가능, 별도의 검색 없이 매일 다른 작품이 주어져 접근성이 좋음<br>단점: 설명이 긴 줄글로 주어져 읽기 어려움, 제공하는 설명 외의 정보를 얻기 어려움<br><br>2. Google Arts & Culture<br>예술 작품을 카테고리별로 나누어 검색 기능, 명화 필터, 명화 기반 게임 등 작품 감상 외에도 명화를 기반으로 한 다양한 엔터테인먼트 기능<br>장점: 쉽고 빠르게 작품 검색, 감상 가능, 명화 필터와 같이 명화를 즐겁게 접할 수 있는 기능이 존재<br>단점: 제공하는 설명 외의 정보를 얻기 어려움, 설명이 난해하여 읽기 어려운 경우가 많음<br><br>3. 미술관의 도슨트 프로그램<br>전시 관람에서에서 작품에 대한 배경 지식, 일화, 작가의 이야기 등 정보를 전달하기 위해 전문 도슨트가 동행<br>장점: 전문가가 쉽게 풀어쓴 설명을 들을 수 있음, 질문 등 정보 전달자와의 상호작용 가능<br>단점: 특정 시간대에만 이용 가능, 단체로 이용하는 경우가 많아 관람객 각각에게 맞추어 진행하기 어려움(속도, 이해력 등)<br><br>예술과 대중 간 장벽을 낮추고, 보다 쉽게 예술을 접할 수 있도록 감상 및 검색을 지원하는 서비스는 존재하지만, 대부분 작품과 그 정보를 나열하는 것에 그친다. 현재 예술 컨텐츠 향유에 관한 서비스에서는, 관련 정보를 쉽게 풀어 설명하거나, 주도적인 감상을 돕거나, 초등학생과 같은 어린 연령층의 사용자를 고려하는 등의 사용자 친화적인 경험이 부족하다.<br>본 서비스 큐엔아트는 작품 정보를 가진 AI 도슨트의 질문에 답하며 주도적인 명화 감상을 유도하고, 대화에서 궁금한 내용을 질문하면 즉시 답변을 얻을 수 있게 함으로써 사용자 맞춤 감상 서비스를 제공한다. 추가적으로, RAG 기술을 이용해 정보의 최신성을 보장하고 환각을 방지해 AI 도슨트의 설명에 신뢰성을 확보한다.<br>또한 대화 감상 후, 감상 내용을 바탕으로 사용자가 원하는 그림을 이미지 생성 AI를 통해 생성할 수 있게 한다. 이는 드로잉이 어려운 초등학생들의 표현에 도움을 주며, 일종의 보상으로 사용되어 명화 감상을 종용한다. |
| (3) 제안 내용 | 미술 작품 감상에 대한 초등학생들의 흥미를 높이기 위해, 대화와 그림 창작 기반의 미술 작품 감상 서비스를 제안한다. 초등학생의 특성을 고려한 대화 감상법을 적용해 작품 감상에 재미를 더하고, 학생 개개인의 질문에 대해 정확하고 깊이있는 정보를 제공하며, 감상 후엔 창작 활동을 통해 자신의 아이디어를 표현한다. 이를 통해 초등학생들에게 미술 작품 감상에 대한 긍정적인 경험을 제공한다.<br><br>1. 도슨트 AI와 대화하며 작품 감상 <br>주입식 설명 위주의 수동적 전시 관람에서 벗어나기 위해, 대규모 언어모델 LLM을 도슨트로 활용하여 초등학생들이 작품과 상호작용할 수 있는 대화형 감상을 제공한다. 이때 초등 미술 교육에 사용되는 2가지 이론인 <아레나스의 대화 중심 감상법>과 <펠드먼의 비평 4단계>를 적용해 프롬프트를 설계한다.<br>AI 도슨트가 단계에 맞추어 질문하는 과정을 통해 작품에 대한 체계적인 접근이 가능하고, 이에 대해 학생들이 자유롭게 자신의 느낌을 표현하고, 대화하며 작품감상에 몰입한다.이러한 대화 경험은 학생들에게 미술 감상을 보다 흥미롭고 의미 있는 활동으로 만들고, 주도적인 참여를 통해 작품에 대한 이해와 관심을 높일 수 있다. <br><br>2. RAG를 이용한 깊이있는 작품 감상<br>작품 감상 과정에서 사용자에게 보다 정확하고 풍부한 정보를 제공하기 위해 RAG (Retrieval-Augmented Generation) 기술을 적용한다. <br>- 작품의 비하인드 스토리: 작가가 해당 작품을 제작하게 된 배경, 작가의 의도 및 작품과 관련된 일화 등 추가적인 정보를 검색해 제공한다.<br>- 미술관 관련 정보: 해당 작품이 전시된 미술관에 대한 정보와 전시 관련 이야기 등을 제공하여 학생들의 관심을 유도한다.<br><br>3. 이미지 생성 AI를 이용한 그림 창작 <br>드로잉 실력에 대한 부담 없이 창작의 즐거움을 느낄 수 있도록 이미지 생성 AI를 활용한 그림 창작 기능을 제공한다. 학생들은 AI와의 대화를 통해 작품의 특징이나 스타일에 대해 학습하고, 이를 바탕으로 자신만의 그림을 구상할 수 있다. 이 과정에서 이미지 생성 AI가 학생의 상상력을 시각적으로 구현해 줌으로써, 학생들은 자신의 아이디어가 실현되는 과정을 즐길 수 있다. 이를 통해 미술 작품 감상뿐만 아니라 창작 활동에 대한 흥미를 유도하고, 미술 표현에 대한 자신감을 높인다. |
| (4) 기대효과 및 의의 | 큐엔아트는 기존의 미술 작품 향유 관련 서비스들과 비교했을 때 사용자에게 보다 능동적이고 맞춤형의 미술 감상 경험을 제공한다. 따라서 다음과 같은 기대효과와 의의를 가지고 있다.  <br><br>기대효과: <br>1)능동적인 문제해결력 향상<br>사용자는 작품에 대한 열린 질문을 받고, 이에 대한 답을 고민하면서 주체적으로 감상에 참여하게 된다. 사용자는 주입식 설명을 듣는 대신, 작품에 대해 스스로 생각하고 질문에 답하며 능동적인 문제해결력을 키울 수 있다. <br>2)언어적 표현력과 비판적 사고 향상 <br>작품에 대한 질문을 받은 사용자는 작품을 깊이있게 해석하고,  자신의 생각을 언어로 표현하며 언어적 표현력을 강화할 수 있다. 또한 사용자는 자신의 아이디어와 관점을 논리적으로 전개하고 전달하며 비판적 사고를 향상할 수 있다. <br>3)예술적 창의력 증진 <br>큐엔아트는 감상 후 사용자가 작품과 관련된 새로운 그림을 생성하도록 유도한다. 사용자에게 드로잉 실력에 대한 부담 없이 AI를 활용해 자신의 아이디어를 시각적으로 표현할 수 있는 기회를 제공함으로써 창의력을 자극하고, 미술에 대한 흥미를 높인다. 이를 통해 사용자는 자신만의 고유한 예술적 창의력을 증진시킬 수 있다. <br> 4)인공지능 리터러시 함양 <br>사용자는 AI 도슨트와의 상호작용을 통해 자연스럽게 인공지능 기술에 익숙해지고, 인공지능을 일상적인 도구로 활용하는 경험을 쌓게 된다. 이를 통해 차세대 인재로서 인공지능 리터러시를 함양하고, 미래 사회에서의 기술 이해력을 높일 수 있다. <br><br>의의 : <br>결론적으로 큐엔아트는 초등학생 사용자가 미술 작품을 감상하면서 스스로 사고하고 표현하는 능력을 기를 수 있도록 지원하는 서비스이다. 작품에 대한 깊이 있는 감상과 창의적 표현을 통해 아이들의 미적 감수성을 키우고, AI와의 상호작용을 통해 미래 기술에 대한 친숙함을 높이는 것이 큐엔아트의 핵심 의의이다. 이를 통해 미술 감상의 경험을 보다 풍부하고 즐겁게 만들어 예술과 대중 간의 장벽을 낮추는 데 기여한다. |
| (5) 주요 기능 리스트 | 1. 도슨트 AI 와 대화하며 작품 감상 <br>- 명화 카드 감상 : 약 80점을 명화 작품들을 명화 카드로 만들어 랜덤으로 사용자에게 제시한다. 해당 명화를 바탕으로 대화 감상과 그림 창작을 진행하면 명화카드를 수집할 수 있다. 학습이 아닌 게임처럼 진행되어 참여 동기를 높이고, 일상에서도 작품을 감상하는 안목을 기른다.<br>- 미술관 전시 감상 : 실제 미술관 전시의 도슨트 프로그램처럼 도슨트 AI와 여러개의 작품들을 대화하며 감상한다.<br>- 도슨트 캐릭터 디자인: 도슨트 AI 캐릭터를 4가지 디자인하여 각각 다른 성격과 말투가 적용된 도슨트를 구현한다.<br>- 음성 인식 기능 : TTS와 STT 기술을 이용하여, 텍스트과 음성 인식을 동시에 사용하도록 구현하여 사용자의 접근성을 낮추고, 실제로 대화하는 느낌을 주어 사용자의 흥미를 유도한다.<br><br>2. 그림 창작 <br>- 관람자의 특징 반영한 그림 생성:  내 경험을 바탕으로 그림 그리기<br>작품을 보고 떠올린 사용자의 경험을 그리는 경우, 어린이의 정보를(이름, 성별, 나이) 반영해 맞춤형 그림을 생성한다.<br>- 작가의 화풍을 반영한 그림 생성 : 작품에서 바꾸고 싶은 부분, 나타나지 않은 부분 상상하기<br>감상한 작품의 작가 화풍에 관람자의 창의적인 아이디어를 반영하여, 이미지 생성 AI 통해 새로운 그림을 창작한다. |

<br>
 
# Project-Design & Implementation
| 항목 | 내용 |
|:---  |---  |
| (1) 요구사항 정의 |- 기능별 상세 요구사항 <br>![image](https://github.com/user-attachments/assets/a613b85f-60b9-444b-ad56-e63713a6c829)<br> - E-R 다이어그램<br> ![er다이어그램](https://github.com/user-attachments/assets/6e3d46f2-501f-4f59-b3ad-d789807dd6c6) |
| (2) 전체 시스템 구성 | 전체 시스템 구조도 <br> ![Section 1 (1)](https://github.com/user-attachments/assets/059aadd1-a031-4967-83fb-240a9adc7f58)<br>사용자는 회원가입 시 아이디, 이메일 등 사용자 정보를 입력하고, 아이디와 비밀번호를 사용해 로그인한다. 안드로이드 또는 iOS 모바일 디바이스를 통해 애플리케이션을 실행한다.<br>클라이언트에서는 입력받은 정보와 채팅 내역, 그림 생성 내역 등을 서버에 전송하거나 전송받아 보여줍니다. TTS/STT 또한 프론트에서 처리한다.<br>서버는 django 기반으로, gpt와 달리를 활용한 AI 응답을 생성하며, langchain을 통해 RAG을 사용한 채팅봇을 관리한다.<br> 명화 작품, 사용자, 미술관 전시 정보 등 필요한 데이터는 mySQL DB에 저장해 관리한다.|
| (3) 주요엔진 및 기능 설계 | 1. 도슨트 AI와 대화하며 작품 감상 <br><br>1) **client** <br/> - **채팅 전송 모듈**: 사용자가 입력한 채팅을 서버로 전송하여 GPT의 응답을 받아온다. 사용자가 입력한 채팅과 AI의 채팅을 말풍선 형태의 UI로 화면에 출력한다. 새 채팅이 생성되면 화면을 자동으로 최하단까지 스크롤하여 매끄러운 채팅 인터랙션을 구현하였다. AI 응답을 받아오는 동안 발생하는 대기 시간에는 ‘입력 중...’ 과 같은 임시 텍스트를 출력해 사용자가 작동을 직관적으로 이해할 수 있도록 한다. <br/> - **TTS 변환 모듈**: AI 채팅 컴포넌트의 우측에 위치한 스피커 아이콘을 탭하면, TTS 변환 API를 호출(3) AI의 ‘Clova TTS 모듈’ 참고)하여 해당 채팅 내용을 TTS로 변환한 mp3 오디오 파일을 받아온다. 응답으로 받은 mp4 파일을 audioplayer을 통해 재생하여, 사용자가 원할 때 AI 채팅을 직접 소리로 들을 수 있게 한다. <br/><br/> 2) **server** <br/> - **Masterpiece App**: 오늘의 명화 카드 기능을 구현하는 Django App <br/> &nbsp;&nbsp;&nbsp;&nbsp;- get_random_artwork : 명화 작품 데이터베이스에 저장된 명화 중 랜덤하게 1개를 불러온다. <br/> &nbsp;&nbsp;&nbsp;&nbsp;- create_artwork_chat_session : 채팅 기록 저장을 위해, 현재 채팅 세션을 생성한다. 채팅 세션에는 감상한 명화의 정보와 사용자 정보가 저장된다. <br/> - **Gallery App** : 미술관 전시 감상 기능을 구현하는 Django App <br/> &nbsp;&nbsp;&nbsp;&nbsp;- museum_list_view : 미술관 정보 데이터베이스에 저장된 미술관 목록을 불러온다. 미술관 id, 이름, 위치, 설명을 반환한다. <br/> &nbsp;&nbsp;&nbsp;&nbsp;- exhibition_list_view : 선택한 미술관의 전시 정보를 불러온다. 전시 id, 제목, 설명, 날짜를 반환한다. <br/> &nbsp;&nbsp;&nbsp;&nbsp;- exhibition_chat_view : 미술관 전시 기반 대화 세션을 관리한다. 오늘의 명화 카드 기능과 분리하여 채팅 세션을 저장, 처리한다. <br/> - **Docent App** : 도슨트 캐릭터를 구현하는 Django App <br/> &nbsp;&nbsp;&nbsp;&nbsp;- get_current_docent / set_current_docent : 현재 사용자가 선택한 도슨트의 정보를 불러오거나, 다른 도슨트를 선택한다. <br/> &nbsp;&nbsp;&nbsp;&nbsp;- get_docent_prompt : 현재 선택 중인 도슨트의 정보가 반영되도록 도슨트 프롬프트를 불러온다. <br/><br/> 3) **AI** <br/> - **Clova TTS 모듈**: NAVER CLOVA Voice의 TTS (Premium) API를 호출해, 클라이언트에서 요청한 텍스트를 음성 데이터로 변환한다. 성공적으로 변환되었다면 클라이언트에게 응답으로 mp3 형식의 바이너리 음성 데이터를 보낸다. 음성 합성에 사용되는 목소리는 도슨트 캐릭터에 따라 다르게 적용한다. <br/> - **OpenAI GPT 4o 모듈**: OpenAI의 API를 호출해 응답을 받아온다. 시스템 프롬프트에는 ‘작품 감상 프롬프트’ (’4) 주요기능의 구현 - 1. 도슨트 AI와 대화하며 작품 감상’ 참조) 를 적용하고, 모델은 GPT 4o로 설정한다. 사용자가 채팅을 전송하면, 해당 User message를 반영해 GPT의 응답을 생성하고, 클라이언트에게 응답으로 생성된 메시지를 보내는 과정을 반복하여 대화가 이어질 수 있게 구현하였다. <br/><br/> 4) **DB** <br/> - **명화 작품 데이터베이스**: 약 80점의 명화 정보가 저장되어 있다. 오늘의 명화 카드 기능의 API 호출에 대하여 해당하는 명화 정보를 불러온다. <br/> - **미술관 데이터베이스**: 미술관의 정보와 미술관에서 진행하는 전시 정보가 저장되어 있다. 미술관 전시 감상 기능의 API 호출에 대하여 해당하는 전시 정보를 불러온다.<br><br>2. RAG를 이용한 깊이있는 작품 감상 <br><br>server : 각 작품 별로 외부 데이터 소스를 불러와 load, split, embed, store 과정을 거쳐 문서 검색기인 retreiver를 생성한다.<br>AI : langchain 라이브러리를 활용하여 RAG 를 활용한 채팅 모듈을 관리한다. 사용자의 응답과 AI 모델의 응답을 기록하고, 사용자의 마지막 질문과 가장 유사한 외부 문서 청크를 retreiver로 불러와 LLM의 시스템 프롬프트를 보강한다. 이를 통해 AI 모델이 정확한 답변 소스에 근거하여 답변할 수 있다. <br>DB : Rag 로 불러올 외부 데이터 소스가 저장되는 곳이다. 데이터 파일은 txt 파일로 저장된다.<br><br>3. 이미지 생성 AI를 이용한 그림 창작:<br><br>1) **client**<br>작품 감상 기능을 마친 후, '그림 그리러 가기' 버튼을 출력하고, 버튼을 통해 그림 창작 화면으로 전환한다. 그림 창작 화면에서 사용자가 그림 창작 방식을 선택할 수 있는 '내 경험으로 그림 그리기', '작품에서 바꾸고 싶은 부분 바꾸기', '작품에서 나타나지 않은 부분 상상하기' 3가지 버튼을 출력한다. 사용자가 버튼을 누르면 선택한 그림 창작 방식에 따라 다른 내용을 서버로 전송한다. <br><br> - **내 경험으로 그림 그리기**: <br>사용자가 입력한 경험을 토대로 사용자 정보가 반영된 그림을 생성하는 기능이므로, 서버가 DB에 저장된 사용자의 성별, 옷, 머리 정보를 활용하도록 그림 창작 방식, 사용자 채팅(프롬프트)과 함께 사용자 ID(DB에서 해당 사용자를 식별하는 기본키)를 서버에 전달한다.<br> - **작품에서 바꾸고 싶은 부분 바꾸기**: <br>사용자가 작품에서 마스킹한 부분만 사용자의 채팅(프롬프트)에 따라 수정하는 기능이므로, 사용자가 작품의 부분을 드래그해 선택할 수 있도록 화면에 작품 이미지와 '선택하기' 버튼을 출력한다. 사용자가 선택하기 버튼을 누르면 마스킹된 작품 이미지를 저장하고, 그림 창작 방식, 사용자 채팅(프롬프트)과 함께 서버에 전달한다.<br> - **작품에서 나타나지 않은 부분 상상하기**: <br>사용자의 채팅(프롬프트) 내용을 작가의 화풍을 적용해 그림으로 생성하는 기능이므로, 서버가 DB에 저장된 해당 작품의 작가 정보를 활용하도록 그림 창작 방식, 사용자 채팅(프롬프트), 작품 ID를 서버에 전달한다.<br><br>이미지 생성 AI DALL-E로 생성된 그림을 서버로부터 받아오며, 화면에는 사용자가 입력한 채팅과 생성된 그림을 말풍선 형태의 UI로 출력한다. 그림을 출력할 때는 사용자의 기기에 그림을 저장할 수 있는 '저장하기' 버튼을 함께 출력한다. <br>그림이 화면에 출력된 후 사용자가 채팅을 재입력할 경우, 사용자의 채팅을 서버로 전송하고 재입력한 채팅을 토대로 생성된 그림을 출력한다. <br><br>2) **server**<br>**imagegen App**:<br>클라이언트로부터 그림 창작 방식, 사용자 채팅을 전달받고, 그림 창작 방식에 따라 사용자 ID(DB에서 해당 사용자를 식별하는 기본키)나 수정할 작품의 마스킹된 이미지, 작품 ID를 함께 전달받는다. <br> - **내 경험으로 그림 그리기**:<br>generate_image_method 함수의 'experience' 액션은 사용자 ID에 저장된 사용자 성별, 옷, 머리 정보를 DB에서 불러와 사용자 채팅에 반영해 최종 프롬프트를 작성한다. DALL-E3에 그림 생성을 요청하고, 생성된 그림을 클라이언트에 반환한다. <br> - **작품에서 바꾸고 싶은 부분 바꾸기**:<br>edit_image_with_dalle2 함수는 사용자의 채팅을 영어로 번역해 최종 프롬프트를 작성한다. DALL-E2에 그림 수정을 요청하고, 수정된 그림을 클라이언트에 반환한다.<br> - **작품에서 나타나지 않은 부분 상상하기**:<br>generate_image_method 함수의 'imagine' 액션은 작품 ID에 저장된 작품 제목 정보, 작가 이름/설명 정보를 DB에서 불러와 사용자 채팅에 반영해 최종 프롬프트를 작성한다. DALL-E3에 그림 생성을 요청하고, 생성된 그림을 클라이언트에 반환한다. <br><br>3) **AI**<br>**DALL-E2/DALL-E3**: <br>서버의 imagegen App으로부터 그림 생성/수정을 요청받으며, DALL-E3는 그림을 생성할 최종 프롬프트를 전달받는다. DALL-E2는 그림 수정 요청 시 최종 프롬프트와 함께 사용자가 마스킹한 작품 이미지를 전달받는다. 최종 프롬프트에 따라 그림을 생성/수정하고, 생성/수정된 그림은 서버로 전달된다.<br><br>4) **DB**<br>최종 프롬프트 작성 시, 반영되는 사용자의 정보, 작품의 정보, 작가의 정보가 아래 DB에 저장되어 있다.<br> - **사용자 정보 데이터베이스** :<br>사용자 성별, 옷, 머리 정보는 account_userprofile 테이블의 gender, clothing, hairstyle 필드에 저장되어 있으며, account_userprofile 테이블은 클라이언트에게 받은 사용자 ID(DB에서 해당 사용자를 식별하는 기본키)가 저장된 auth_user 테이블을 참조한다. <br> - **명화 작품 데이터베이스** :<br>작품 제목 정보는 masterpiece_artwork 테이블의 title 필드에 저장되어 있으며, masterpiece_artwork 테이블은 작가의 이름 정보가 저장된 name 필드를 통해 masterpiece_artist 테이블을 참조한다.<br> - **작가 정보 데이터베이스** :<br>작가 이름 정보는 masterpiece_artist 테이블의 name 필드에 저장되어 있으며, style 필드는 작가의 이름 혹은 작가 설명이 저장되어 있다. 최종 프롬프트의 작가 정보 삽입에 사용되는 필드는 style 필드이다. <br><br><br> |
| (4) 주요 기능의 구현 | 1. 도슨트 AI와 대화하며 작품 감상 <br><br>홈 화면에서 “작품 감상하기” 메뉴를 탭하면, 데이터베이스에 등록된 명화 중 랜덤으로 1개의 명화가 선정되어 ‘오늘의 명화 카드’ 화면이 출력된다. 사용자는 ‘감상 시작하기’ 버튼을 눌러 선정된 랜덤 명화에 대한 대화 감상을 시작할 수 있다. AI와 도슨트와 대화하며 작품을 감상한 뒤, 감상이 종료되면 그림 생성 화면으로 진입할 수 있다. <br/> AI 도슨트와의 채팅은 GPT 4o 모델에 ‘작품 감상 프롬프트’를 적용하여 구현하였다. 펠드먼의 비평 4단계, 아레나스의 대화 중심 감상법을 중심으로 초등학생 미술교육 관련 이론과, 여러 테스트를 통해 완성한 최종 프롬프트는 아래와 같다. <br/><br/> ``` answer_system_prompt = ("You are a art docent for elementary school students. Lead the conversation according to the guide and stages below." "Using the provided **artwork_info**, engage in conversations that make the viewing experience interesting." "Ask thoughtful questions and show empathy to help the students deeply immerse themselves in the art." "and if the student gives a response that requires further explanation," "you can add supplementary information in a way that's simple and easy for them to understand. " "Use the following pieces of retrieved context for explanation. Use three sentences maximum and keep the answer concise in KOREAN" "\n\n" "{context}" "\n\n" "----------------------" "## Tone Guide\n" "Speak casually as if talking to a close friend. Maintain an energetic, warm, and exciting atmosphere." "\n\n" "## Conversation Guide\n" "All information should be based on the details provided below **artwork info**." "Using the 'Description' in the **artwork_info**, ask interesting questions. Follow the [Conversation Learning Stages]. The order can change depending on the conversation flow." "But Asking GOOD questions and engagin in deep conversation is more important than strictly following the stages. Refer to the question examples below for guidance." "** At each stage, ask follow-up questions based on the user's response to encourage them to keep thinking." "** Ensure the user has the opportunity to explore their thoughts fully by continuing with additional questions that prompt further reflection" "** The conversation should continue until the user has fully explored the topic at each stage." "After 2-3 questions at each stage, bring the conversation to a close. Follow the ## How to end conversation " "\n\n" "## [Conversation Learning Stages]##\n" "1. Observe the artwork closely and describe what you see.\n" "2. Express emotions or thoughts you feel from the formal elements of the artwork, such as composition, color, and texture.\n" "3. Interpret the meaning of the artwork.\n" "4. Recall personal experiences related to the artwork and evaluate the artwork based on your own standards and feelings.\n" "\n\n" "## Example Questions by Stage\n" "Stage 1. What do you see in this artwork? What are the key figures or objects depicted in the piece? How are the colors and shapes used? What situation do you think this depicts?\n" "Stage 2. How do the colors in this artwork make you feel? How does the composition of the artwork guide your eyes through the piece? Do the lines or forms in the artwork give you a sense of energy, stillness, or motion?\n" "Stage 3. What do you think the artist was trying to express? What do you think the artist felt while creating this artwork? How might the time period or the artist’s personal life have influenced this artwork?\n" "Stage 4. Do you have any personal experiences related to this painting? What is your favorite part of the artwork? Why does it appeal to you? How does this artwork compare to other works of art? What makes it unique or special?\n" "\n\n" "## Handling Inappropriate Language\n" "If any hate or discriminatory expressions appear during the conversation, explain to the student that such expressions should not be used and why they are harmful." "\n\n" "## How to end conversation\n" "Ensure that the conversation does not continue indefinitely. After 2-3 questions at each stage, bring the conversation to a close. " "You can use the following steps to end the conversation:\n" "1. Summarize what was discussed and appreciated about the artwork.\n" "2. Thank the student for their participation and engagement.\n" "3. Encourage them to explore more artworks and express their own thoughts and creativity.\n" "4. Ask the user if they have any additional questions. If not, Warp up the conversation with this sentence : 그림 그리러 가자!\n\n" "----------------------" "Here is the **artwork info**\n" f"Artwork: {session.artwork.title} by {session.artwork.artist}, " f"created in {session.artwork.year}. Description: {session.artwork.description} " ) ``` <br/><br/> 선정된 명화의 데이터(작품 제목, 작가, 제작년도, 작품 설명)를 데이터베이스에서 불러와 프롬프트 상의 artwork info에 반영한다. 작품에 맞는 프롬프트가 적용된 GPT 4o는 AI 도슨트로서 사용자와 대화 감상을 나눌 수 있다. <br/><br/> [Conversation Learning Stage] (대화 감상 단계) 에 맞추어, 단계별로 질문과 답을 이어가며 감상 대화를 나눈다. 모든 단계가 완료되면 ‘그림 그리러 가자!’ 라고 말하게 한다. 클라이언트에서는 백엔드 응답 내용 안에 ‘그림 그리러 가자!’ 가 포함되어 있다면, 대화가 종료된 것으로 인식하여 추가적인 채팅을 입력할 수 없게 UI를 업데이트한 뒤, ‘그림 그리러 가기’ 버튼을 화면에 띄운다. <br/><br/> 2) **미술관 전시 감상** <br/> 홈 화면에서 “미술관 찾기” 메뉴를 탭하면, 데이터베이스에 등록된 미술관 정보를 볼 수 있다. 특정 미술관을 선택하면 해당 미술관에서 진행하는 전시 정보를 출력한다. 사용자는 전시의 상세 정보를 볼 수 있으며, ‘전시 감상’ 버튼을 눌러 해당 전시에서 실제로 전시 중인 작품을 주제로 한 대화 감상을 시작할 수 있다. 전반적인 프롬프트는 ‘명화 카드 감상’ 기능에서 사용한 것과 동일하다. 단, 작품마다 그림을 생성하지 않고, 데이터베이스에 등록되어 있는 해당 전시의 작품들을 모두 감상한 뒤, 그중 하나를 선택하여 한 번의 그림 생성을 진행한다. 그림 창작 방식은 전술한 3가지를 기본적으로 모두 허용하나, 작품의 저작권 정책을 따른다. <br/><br/> 3) **도슨트 캐릭터** <br/> 총 4가지의 서로 다른 도슨트 캐릭터를 디자인, 설계하였다. 모두 다른 성격과 말투를 갖고 있으며, 이는 프롬프트의 “Tone Guide”에 말투를 지정한 문장을 추가하여 구현한다. 또한, 선택된 도슨트 캐릭터 종류에 따라 TTS 음성 합성에 사용하는 목소리를 다르게 하여, 실감 나는 대화를 형성한다. 데모 영상 등에서는 기본 캐릭터인 ‘빈센트 반 고래’ 캐릭터를 기준으로 진행하였다. 실제 애플리케이션에서는, ‘명화 카드 감상’을 5번, 10번, 15번 진행할 때마다 새 도슨트 캐릭터가 지급되도록 구현하였다. <br/><br/> 4) **TTS / STT** <br/> 실제로 대화하며 진행하는 듯한 느낌을 더하기 위해, TTS와 STT 기능을 구현하였다. STT는 Flutter에서 제공하는 speech-to-text 패키지를 사용하여, 애플리케이션의 마이크 권한을 허용해 사용자가 음성으로 채팅을 입력할 수 있도록 하였다. TTS는 NAVER CLOVA Voice API를 호출해 AI의 채팅을 캐릭터에 맞는 목소리로 변환하고, audioplayer 패키지를 이용해 음성 파일을 재생할 수 있도록 구현하였다. 이러한 기능은 휴대폰의 키보드 사용이 어려운 초등학생들도 쉽게 서비스를 이용할 수 있도록 하여 사용성을 높이고, 실제로 도슨트 AI와 친근하게 대화하는 듯한 느낌을 주어 사용자의 흥미를 유도한다. <br><br>2. RAG를 이용한 깊이있는 작품 감상<br><br>RAG를 활용한 채팅 모듈은 다음과 같이 두가지 단계로 구성된다.<br>1) history_aware_retriever : “contextualize query” prompt→LLM→contextualized query→Retriever<br>사용자의 질문과 채팅 기록을 고려하여 사용자의 마지막 질문을 하나로 만든다. 질문을 하나로 만들어 이 질문과 가장 유사한 문서 청크를 retriever로 불러오기 위함이다. <br><br>2)question_aware_chain : Documents→”Answer question prompt”→LLM→Answer<br>retriever로 불러온 질문과 가장 유사한 청크를 시스템 프롬프트에 {context}에 넣어 보강한다. LLM이 이 문맥을 참조하면서 정확하고 풍부한 답변을 생성할 수 있다.<br><br>2. 이미지 생성 AI를 이용한 그림 창작:<br><br>1) **내 경험으로 그림 그리기**: <br>사용자가 입력한 경험을 토대로 사용자 정보가 반영된 그림을 생성해야 하므로, DB에 저장된 사용자 정보를 활용하도록 그림 창작 방식, 사용자 채팅(프롬프트)과 함께 사용자 ID(DB에서 해당 사용자를 식별하는 기본키)를 클라이언트로부터 전달받으면, DB에 저장된 사용자의 정보를 토대로 최종 프롬프트를 다음과 같이 작성한다.<br>```"나는 {gender} 초등학생이고 {clothing} 옷을 입었고 머리는 {hairstyle}(이)야. {prompt}"```<br>{gender},{clothing},{hairstyle}에는 DB에 저장된 사용자 정보를 삽입하며, {prompt}에는 사용자의 채팅 내용을 삽입한다. DB의 사용자 정보가 비어있을 시, {gender}는 공백, {clothing}는 "반팔티", {hairstyle}는 "짧은 머리"를 기본값으로 삽입한다. 최종 프롬프트 작성 후 DALL-E3에 그림 생성을 요청하고 그림을 생성한다.<br><br>2) **작품에서 바꾸고 싶은 부분 바꾸기**: <br>사용자가 작품에서 수정하고 싶은 내용을 토대로 사용자가 작품 이미지에서 마스킹한 부분만 수정해야하므로, DALL-E가 수정할 부분을 인식하도록 그림 창작 방식, 사용자 채팅(프롬프트)과 함께 마스킹된 작품 이미지를 클라이언트로부터 전달받으면, 그림 수정 기능은 DALL-E2의 기능이므로 DALL-E2의 그림 생성 정확도를 높이기 위해 사용자 채팅을 gpt-4o-mini 모델로 영어로 번역한 후 최종 프롬프트로 사용한다.DALL-E2 그림 수정 시 정사각형 이미지만 수정 가능하므로 이미지를 1024 * 1024 크기로 조정한다. DALL-E2에 그림 수정을 요청하고 그림을 수정한다.<br><br> 3) **작품에서 나타나지 않은 부분 상상하기**: <br>사용자가 작품을 보고 상상한 내용을 토대로 작가의 화풍으로 그려진 그림을 생성해야 하므로, 서버가 DB에 저장된 해당 작품과 작가 정보를 활용하도록 그림 창작 방식, 사용자 채팅(프롬프트)과 함께 작품 ID를 클라이언트로부터 전달받으면, DB에 저장된 작품의 작가 정보를 토대로 최종 프롬프트를 다음과 같이 작성한다.<br>```"{artist_style} 화풍으로 {artwork_title} 작품에서 {prompt}"```<br>{artist_style},{artwork_title}에는 DB에 저장된 작가의 이름/설명 정보와 작품의 제목 정보를 삽입하며, {prompt}에는 사용자의 채팅 내용을 삽입한다. DALL-E3 저작권 정책에 따라 작가의 화풍을 사용할 수 없는 경우, 그림 생성 시 오류가 발생하므로 일부 작가는 작가의 이름을 언급하지 않으면서 작가를 설명하는 텍스트를 대신 DB에 저장해두고 {artist_style}에 삽입해 저작권 정책을 우회한다. ```ex) 'Claude Monet', '프랑스 인상주의의 개척자'``` 최종 프롬프트 작성 후 DALL-E3에 그림 생성을 요청하고 그림을 생성한다.<br><br> |
| (5) 기타 |  |

<br>
